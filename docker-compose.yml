version: '2'

volumes:
  nodered-data:

services:
  rise-nodered:
    build: ./nodered
    restart: always
    privileged: true
    ports:
      - '80:1880'
    volumes:
      - 'nodered-data:/usr/src/node-red/data'
      - '/dev/ttyUSB0:/dev/ttyUSB0'

  rise-gateway:
    build: ./gateway
    restart: always
    privileged: true
    devices:
      - "/dev/mem:/dev/mem"
    cap_add: 
      - SYS_RAWIO